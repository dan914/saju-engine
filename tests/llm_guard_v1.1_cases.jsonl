{"test_id": "STRUCT-000-001", "description": "Missing required field in evidence.sources", "input": {"request_id": "test-struct-001", "llm_output": {"text": "일간이 약합니다."}, "evidence": {"sources": [], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 25, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.7}}}, "expected_verdict": "deny", "expected_violations": [{"rule_id": "STRUCT-000", "reason_code": "INPUT-INVALID"}]}
{"test_id": "STRUCT-000-002", "description": "Valid input structure", "input": {"request_id": "test-struct-002", "llm_output": {"text": "일간이 약하므로 인성과 비겁을 용신으로 사용합니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 신약", "claim_ko": "일간 신약"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 25, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.7}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "EVID-BIND-100-001", "description": "Factual claim without evidence_id", "input": {"request_id": "test-evid-001", "llm_output": {"text": "월지에 정관이 투출하여 정관격입니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 중화"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["화"], "confidence": 0.7}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "EVID-BIND-100", "reason_code": "LLM-CLAIM-NOEVID"}]}
{"test_id": "EVID-BIND-100-002", "description": "All claims properly bound to evidence", "input": {"request_id": "test-evid-002", "llm_output": {"text": "일간이 중화이며(STR-001), 월지 인성이 강합니다(STR-002)."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 중화"}, {"evidence_id": "STR-002", "type": "strength", "confidence": 0.75, "claim": "월지 인성 강함"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["수"], "confidence": 0.7}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "SCOPE-200-001", "description": "Medical advice (out of scope)", "input": {"request_id": "test-scope-001", "llm_output": {"text": "사주상 간 질환이 있으니 병원에서 간 검사를 받으세요."}, "evidence": {"sources": [{"evidence_id": "SHE-001", "type": "shensha", "confidence": 0.6, "claim": "병부 위치"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.7}}}, "expected_verdict": "deny", "expected_violations": [{"rule_id": "SCOPE-200", "reason_code": "OUT-OF-SCOPE"}]}
{"test_id": "SCOPE-200-002", "description": "General interpretation (in scope)", "input": {"request_id": "test-scope-002", "llm_output": {"text": "일간이 강하여 식상과 재성을 활용하는 전략이 유리합니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.85, "claim": "일간 신강"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신강", "score": 70, "confidence": 0.85}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["토", "금"], "confidence": 0.8}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "MODAL-300-001", "description": "Absolute claim with low confidence", "input": {"request_id": "test-modal-001", "llm_output": {"text": "반드시 재성이 용신입니다."}, "evidence": {"sources": [{"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.45, "claim": "재성 용신 가능"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.7}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["금"], "confidence": 0.45}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "MODAL-300", "reason_code": "MODALITY-OVERCLAIM"}]}
{"test_id": "MODAL-300-002", "description": "Hedged expression with appropriate confidence", "input": {"request_id": "test-modal-002", "llm_output": {"text": "재성이 용신일 가능성이 있습니다."}, "evidence": {"sources": [{"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.6, "claim": "재성 용신 가능"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.7}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["금"], "confidence": 0.6}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "CONF-LOW-310-001", "description": "Low average confidence across core engines", "input": {"request_id": "test-conf-001", "llm_output": {"text": "용신은 목이며 재성 운이 유리합니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.35, "claim": "일간 신약"}, {"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.38, "claim": "목 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.35}, "relation_summary": {"relation_items": [], "confidence": 0.40}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.38}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "CONF-LOW-310", "reason_code": "CONFIDENCE-LOW"}]}
{"test_id": "CONF-LOW-310-002", "description": "Adequate average confidence", "input": {"request_id": "test-conf-002", "llm_output": {"text": "용신은 목이며 재성 운이 유리할 가능성이 높습니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.75, "claim": "일간 신약"}, {"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.70, "claim": "목 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.75}, "relation_summary": {"relation_items": [], "confidence": 0.65}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.70}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "REL-400-001", "description": "Claim contradicts detected relation", "input": {"request_id": "test-rel-001", "llm_output": {"text": "지지 간 충이 없어 안정적입니다."}, "evidence": {"sources": [{"evidence_id": "REL-001", "type": "relation", "confidence": 0.9, "claim": "자오충 형성"}], "derived": {"relations": [{"type": "chong", "pillars": ["子", "午"], "effect": "충돌 발생"}]}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": [{"type": "chong", "impact_weight": 0.85, "conditions_met": ["adjacent"], "strict_mode_required": false, "formed": true, "hua": false}]}, "yongshin_result": {"yongshin": ["토"], "confidence": 0.7}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "REL-400", "reason_code": "REL-MISMATCH"}]}
{"test_id": "REL-400-002", "description": "Claim aligns with detected relation", "input": {"request_id": "test-rel-002", "llm_output": {"text": "자오충이 형성되어 변동성이 있습니다(REL-001)."}, "evidence": {"sources": [{"evidence_id": "REL-001", "type": "relation", "confidence": 0.9, "claim": "자오충 형성"}], "derived": {"relations": [{"type": "chong", "pillars": ["子", "午"], "effect": "충돌 발생"}]}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": [{"type": "chong", "impact_weight": 0.85, "conditions_met": ["adjacent"], "strict_mode_required": false, "formed": true, "hua": false}]}, "yongshin_result": {"yongshin": ["토"], "confidence": 0.7}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "REL-OVERWEIGHT-410-001", "description": "High impact_weight but insufficient conditions", "input": {"request_id": "test-relow-001", "llm_output": {"text": "삼합이 완전히 성립하여 강력한 효과를 발휘합니다."}, "evidence": {"sources": [{"evidence_id": "REL-002", "type": "relation", "confidence": 0.7, "claim": "삼합 부분 성립"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": [{"type": "sanhe", "impact_weight": 0.92, "conditions_met": ["partial"], "strict_mode_required": true, "formed": false, "hua": false}]}, "yongshin_result": {"yongshin": ["수"], "confidence": 0.7}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "REL-OVERWEIGHT-410", "reason_code": "RELATION-OVERWEIGHT"}]}
{"test_id": "REL-OVERWEIGHT-410-002", "description": "High impact_weight with sufficient conditions", "input": {"request_id": "test-relow-002", "llm_output": {"text": "삼합이 완전히 성립하여 강력한 효과를 발휘할 가능성이 매우 높습니다."}, "evidence": {"sources": [{"evidence_id": "REL-002", "type": "relation", "confidence": 0.85, "claim": "삼합 완전 성립"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": [{"type": "sanhe", "impact_weight": 0.92, "conditions_met": ["adjacent", "formed", "hua"], "strict_mode_required": true, "formed": true, "hua": true}]}, "yongshin_result": {"yongshin": ["수"], "confidence": 0.85}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "CONSIST-450-001", "description": "Strength신약 but yongshin suppression-focused", "input": {"request_id": "test-consist-001", "llm_output": {"text": "일간이 약하므로 억제 중심 용신을 사용합니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 신약"}, {"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.65, "claim": "관살 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 25, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["금"], "confidence": 0.65, "strategy": "부억"}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "CONSIST-450", "reason_code": "CONSIST-MISMATCH"}]}
{"test_id": "CONSIST-450-002", "description": "Strength신약 with resource/companion yongshin (consistent)", "input": {"request_id": "test-consist-002", "llm_output": {"text": "일간이 약하므로 인성과 비겁을 용신으로 활용합니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 신약"}, {"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.75, "claim": "목 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 25, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.75, "strategy": "부억"}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "YONGSHIN-UNSUPPORTED-460-001", "description": "Yongshin lacks climate support and relation bias negative", "input": {"request_id": "test-yongun-001", "llm_output": {"text": "용신은 화이며 계절적으로 강하게 지지받습니다."}, "evidence": {"sources": [{"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.55, "claim": "화 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.75}, "relation_summary": {"relation_items": [{"type": "chong", "impact_weight": 0.6, "conditions_met": ["adjacent"], "strict_mode_required": false, "formed": true, "hua": false}]}, "yongshin_result": {"yongshin": ["화"], "confidence": 0.55}, "climate": {"season_element": "수", "support": "약함"}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "YONGSHIN-UNSUPPORTED-460", "reason_code": "YONGSHIN-UNSUPPORTED"}]}
{"test_id": "YONGSHIN-UNSUPPORTED-460-002", "description": "Yongshin has climate and relation support", "input": {"request_id": "test-yongun-002", "llm_output": {"text": "용신은 목이며 계절과 관계 흐름이 지지합니다."}, "evidence": {"sources": [{"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.78, "claim": "목 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.75}, "relation_summary": {"relation_items": [{"type": "sanhe", "impact_weight": 0.75, "conditions_met": ["adjacent", "formed"], "strict_mode_required": false, "formed": true, "hua": false}]}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.78}, "climate": {"season_element": "목", "support": "강함"}}}, "expected_verdict": "allow", "expected_violations": []}
{"test_id": "SIG-500-001", "description": "Policy signature mismatch", "input": {"request_id": "test-sig-001", "llm_output": {"text": "일간이 약합니다."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 신약"}], "derived": {}, "signatures": {"policy_refs": [{"policy_name": "strength_policy_v2.json", "policy_version": "2.0", "sha256": "0000000000000000000000000000000000000000000000000000000000000000"}]}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.7}}}, "expected_verdict": "deny", "expected_violations": [{"rule_id": "SIG-500", "reason_code": "POLICY-SIG-MISMATCH"}]}
{"test_id": "PII-600-001", "description": "PII detected in output", "input": {"request_id": "test-pii-001", "llm_output": {"text": "상담 문의는 010-1234-5678로 연락주세요."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 중화"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "중화", "score": 50, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["수"], "confidence": 0.7}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "PII-600", "reason_code": "PII-DETECTED"}]}
{"test_id": "KO-700-001", "description": "Missing Korean labels for enums", "input": {"request_id": "test-ko-001", "llm_output": {"text": "Strength is weak."}, "evidence": {"sources": [{"evidence_id": "STR-001", "type": "strength", "confidence": 0.8, "claim": "일간 신약"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.7}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "KO-700", "reason_code": "LABEL-NONCOMPLIANT"}]}
{"test_id": "AMBIG-800-001", "description": "Missing source citation for classical reference", "input": {"request_id": "test-ambig-001", "llm_output": {"text": "고전에 따르면 일간이 약할 때 인성을 용신으로 사용합니다."}, "evidence": {"sources": [{"evidence_id": "YON-001", "type": "yongshin", "confidence": 0.7, "claim": "인성 용신"}], "derived": {}}, "engine_summaries": {"strength": {"bucket": "신약", "score": 30, "confidence": 0.8}, "relation_summary": {"relation_items": []}, "yongshin_result": {"yongshin": ["목"], "confidence": 0.7}}}, "expected_verdict": "revise", "expected_violations": [{"rule_id": "AMBIG-800", "reason_code": "AMBIG-SOURCE"}]}
