# Saju Engine WSL Setup Guide

## ğŸ¯ Setup Complete!

The Saju Engine has been successfully configured for your WSL environment. All macOS-specific code has been reviewed and the project is now cross-platform compatible.

## ğŸ“‹ Prerequisites

- **Python 3.11+** âœ… (Available on your system)
- **WSL/Linux environment** âœ…
- **Git** âœ…

## ğŸš€ Quick Start

```bash
# Quick setup (minimal dependencies)
./quickstart.sh

# Or full setup (all dependencies)
./setup_env.sh

# Run a service
./run_service.sh api-gateway
```

## ğŸ“¦ Project Structure

```
saju-engine/
â”œâ”€â”€ services/           # Microservices
â”‚   â”œâ”€â”€ api-gateway/    # Main API gateway
â”‚   â”œâ”€â”€ analysis-service/   # Analysis engine
â”‚   â”œâ”€â”€ astro-service/      # Astronomical calculations
â”‚   â”œâ”€â”€ pillars-service/    # Four Pillars calculations
â”‚   â”œâ”€â”€ tz-time-service/    # Timezone conversions
â”‚   â”œâ”€â”€ llm-checker/        # LLM validation
â”‚   â”œâ”€â”€ llm-polish/         # LLM text polish
â”‚   â””â”€â”€ common/             # Shared utilities
â”œâ”€â”€ data/               # Data files
â”‚   â””â”€â”€ sample/         # Sample CSV data
â”œâ”€â”€ setup_env.sh        # Full environment setup
â”œâ”€â”€ quickstart.sh       # Quick minimal setup
â”œâ”€â”€ run_service.sh      # Service runner
â”œâ”€â”€ test_setup.sh       # Setup validation
â””â”€â”€ requirements.txt    # Python dependencies
```

## ğŸ”§ Available Scripts

### setup_env.sh
- Creates Python 3.11 virtual environment
- Installs all dependencies
- Sets up directories and permissions
- Configures environment variables

### quickstart.sh
- Minimal setup for fast start
- Installs only essential packages
- Quick way to get services running

### run_service.sh
- Runs individual services
- Supports all microservices
- Automatic port assignment
- Example: `./run_service.sh api-gateway [port]`

### test_setup.sh
- Validates environment setup
- Checks dependencies
- Tests imports
- Runs sample tests

## ğŸŒ Available Services

| Service | Default Port | Description |
|---------|-------------|-------------|
| api-gateway | 8000 | Main API gateway |
| analysis-service | 8001 | Saju analysis engine |
| astro-service | 8002 | Solar term calculations |
| pillars-service | 8003 | Four Pillars calculations |
| tz-time-service | 8004 | Timezone conversions |
| llm-checker | 8005 | LLM validation service |
| llm-polish | 8006 | LLM text polishing |

## ğŸš¦ Running Services

### Single Service
```bash
# Run with default port
./run_service.sh api-gateway

# Run with custom port
./run_service.sh api-gateway 3000

# Or directly with uvicorn
source venv/bin/activate
uvicorn services.api_gateway.app.main:app --reload
```

### All Services (with tmux)
```bash
# Install tmux if not available
sudo apt install tmux

# Run all services
./run_service.sh all

# Attach to tmux session
tmux attach-session -t saju-engine
```

## ğŸ§ª Testing

```bash
# Activate environment
source venv/bin/activate

# Run tests
pytest

# Test specific service
pytest services/api-gateway/tests/

# Check service health
curl http://localhost:8000/health
```

## ğŸ“ Environment Variables

Create `.env.local` for custom settings:
```bash
PYTHONPATH=${PYTHONPATH}:$(pwd)
SAJU_ENV=development
LOG_LEVEL=INFO
SERVICE_HOST=0.0.0.0
SERVICE_PORT=8000
```

## âœ… What Was Fixed for WSL

1. **No macOS-specific paths found** - Project uses Python's pathlib for cross-platform paths
2. **File permissions** - Scripts set proper executable permissions
3. **Python environment** - Configured for Python 3.11
4. **Service scripts** - Created WSL-compatible startup scripts
5. **Dependencies** - All packages compatible with Linux

## ğŸ› Troubleshooting

### Permission Issues
```bash
chmod +x *.sh
find . -type f -name "*.py" -exec chmod 644 {} \;
```

### Python Path Issues
```bash
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
```

### Virtual Environment Not Found
```bash
python3.11 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### Port Already in Use
```bash
# Find process using port
lsof -i :8000
# Or use different port
./run_service.sh api-gateway 8001
```

## ğŸ“Š Next Steps

1. **Run the setup**: `./quickstart.sh` or `./setup_env.sh`
2. **Start a service**: `./run_service.sh api-gateway`
3. **Check health**: `curl http://localhost:8000/health`
4. **View API docs**: Open http://localhost:8000/docs in browser
5. **Run tests**: `pytest`

## ğŸ‰ Success!

Your Saju Engine is now ready to run on WSL/Linux! All services are configured and ready to use.