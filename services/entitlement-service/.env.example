# Entitlement Service Environment Configuration
# Copy this file to .env and update values for your environment

# ============================================================================
# Service Metadata
# ============================================================================
APP_NAME=entitlement-service
VERSION=1.0.0
ENVIRONMENT=development  # development | staging | production

# ============================================================================
# Database Configuration (PostgreSQL 14+)
# ============================================================================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/entitlements

# Connection pool settings
# DB_POOL_SIZE=10
# DB_MAX_OVERFLOW=20

# ============================================================================
# Redis Configuration (Redis 7+)
# ============================================================================
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# Firebase JWT Authentication
# ============================================================================
# Update these values with your Firebase project credentials
JWT_AUDIENCE=your-firebase-project
JWT_ISSUER=https://securetoken.google.com/your-firebase-project

# Firebase Admin SDK credentials (optional, for token verification)
# FIREBASE_CREDENTIALS_PATH=/path/to/firebase-adminsdk.json

# ============================================================================
# Rate Limiting (requests per minute per user)
# ============================================================================
RATE_LIMIT_CONSUME_RPM=10        # Token consumption endpoint
RATE_LIMIT_REWARD_RPM=3          # Ad reward endpoints
RATE_LIMIT_ENTITLEMENTS_RPM=60   # Entitlements fetch endpoint

# ============================================================================
# Ad Reward Configuration
# ============================================================================
AD_COOLDOWN_SECONDS=3600         # 1 hour cooldown between ad rewards
AD_DAILY_CAP=2                   # Maximum 2 ad rewards per day (KST)
AD_MONTHLY_CAP=60                # Maximum 60 ad rewards per month
AD_REWARD_EXPIRY_MINUTES=5       # SSV pending reward expiry time

# ============================================================================
# Timezone and Scheduling
# ============================================================================
TIMEZONE=Asia/Seoul              # KST timezone for quota resets

# ============================================================================
# Observability
# ============================================================================
METRICS_ENABLED=true             # Enable Prometheus metrics endpoint
LOG_LEVEL=INFO                   # DEBUG | INFO | WARNING | ERROR | CRITICAL

# ============================================================================
# Security
# ============================================================================
IDEMPOTENCY_TTL_HOURS=24         # Idempotency key TTL (24 hours)

# CORS settings (production only)
# CORS_ORIGINS=https://app.yourdomain.com,https://admin.yourdomain.com
# CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# Development/Testing
# ============================================================================
# X-Debug-User header (development only - REMOVE IN PRODUCTION)
# Set ENVIRONMENT=development to enable debug mode
# Then send X-Debug-User: <user_id> header to bypass JWT verification

# ============================================================================
# Production Settings (IMPORTANT)
# ============================================================================
# Before deploying to production:
# 1. Set ENVIRONMENT=production
# 2. Update DATABASE_URL with production credentials
# 3. Update REDIS_URL with production Redis instance
# 4. Update JWT_AUDIENCE and JWT_ISSUER with real Firebase project
# 5. Remove or disable X-Debug-User functionality
# 6. Configure CORS_ORIGINS for your frontend domains
# 7. Review rate limits and caps based on your traffic
# 8. Set LOG_LEVEL=WARNING or ERROR to reduce noise
